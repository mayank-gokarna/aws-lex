<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lex Chatbot</title>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1493.0.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f7f9;
            margin: 0;
            padding: 0;
        }

        header {
            background-color: #2d3e50;
            color: #ffffff;
            padding: 20px 40px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        h1 {
            margin: 0;
            font-size: 28px;
        }

        .chat-container {
            max-width: 600px;
            margin: 40px auto;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        #chatBox {
            height: 400px;
            overflow-y: auto;
            padding: 20px;
            border-bottom: 1px solid #e0e0e0;
            position: relative;
            background-image: url('https://csf-ai-hosting-amplify.s3.us-east-1.amazonaws.com/hansen.png?response-content-disposition=inline&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEO%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLWVhc3QtMSJHMEUCIBJtjb40O5yFFVvvpEYlg%2B2sEsuhiLaJX51yKXE8%2BAlVAiEApP6GNht1E8DwH2fjHIb%2FdYvH4cMaTwKfOL98joAzzCMqxAMIZxACGgwzNDQ0MjU1MDg0MjgiDMsHiTHQc5GyjJ%2BQ%2BiqhA21alziTrMLQm%2Fpgf%2BoHYt%2FBlT9y7ZOwnOwOZptUDIfIsRTQI7QAwPPYigf7dgzyc3qtGVbfkkDf%2BVsLwr5KzkxhaBoc6vDSkVwfuFcvDgzxDmD6m2JW51Gln2nRFa0MLTPUJbpJauIfDzs65LSU675gGObXafvWtMX7w3bq4ND9DGV%2Fmg6m0McI1J0qbcfGIfEoiQ%2B5LsY3WgmygksvUCRojwXb35qltLxvWZW3V6jFhZXhO%2FFB94ouGoZXD2q88g8TbYZ%2BouH8ADX2oLMtsRhkI61bpHHSFG3Ib7veEBtALZ0%2FfCsvGb3kY0zhKUB5Rog1Y0MF9M5iezC%2BIXYeH2YOrWt9YXMU5kqSgXP1kLYreKLzRYnL1Z%2FBFjrfQ6s3y1KkBI2NsjkDOVxiw6dAqQH0AITCu96oVm%2Bqzk3Vqeo05qvRS%2BETBnIlOTTuj5FYhLOQKTnyRr4K2UQcNogTd0HT7eduZWFMrzW4eqylPpSuyTFE4nURRRIUi27keUSOy8acUcAR3u%2FaGODpXcbC7bmFQjSSAwH8Ulj%2BgRNAVALZrzCe99C%2FBjq3AirYWs4qMQV1VPrPsDZx6pJH71gGH3eR818DEnpknhGfh47MDXYKjqleHhRL8voAp0srifqkOlmE4Zr0ykLMPKsEobsuGbvBvm4%2B18QENtyIZmSbrnnyTur7miDuLMJfDM7KxhMiQ17aXb%2FzIqB1uSaE5N%2BQFMTf6slfg8sW%2FnRy%2FUJyWk2DEZuYXuyBf3WYLybhxDfcxP8gRIYXl6zZpTHlwMvFFUKWqWbyOyRLOsNMBslLMkDYz6YViY928qyH7a%2FSWZ79phMh9pyyDhVFO0uDkItrPDv8pvpwnQMdlZEo7tgWE6PkmmbldTfUimD42LH%2BjsdNOQlMy6uRfBOuJZOF48IQKmJaKUpACXDYGCdI%2BPS5qlq%2F3JzUCPdHnghWvhdVFyYrjKrLgl5m1%2FzdPUdVYzNsP2FE&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=ASIAVAMK4FZGCTFH3UM3%2F20250407%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20250407T221515Z&X-Amz-Expires=43200&X-Amz-SignedHeaders=host&X-Amz-Signature=345d9b63ed427d88f764989bdabfaf0232b39b372c8b9affb0914d484c386b4d'); /* ðŸ‘ˆ Replace this with your actual S3 image URL */
            background-size: cover;
            background-position: center;
            color: #333;
        }

        #chatBox::before {
            content: '';
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: rgba(255, 255, 255, 0.7); /* Light overlay */
            z-index: 0;
        }

        #chatBox p {
            position: relative;
            z-index: 1;
            margin: 8px 0;
        }

        #chatBox strong {
            color: #333;
        }

        .input-area {
            display: flex;
            padding: 15px 20px;
            background-color: #f9fafc;
        }

        #userInput {
            flex: 1;
            padding: 10px 14px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 6px;
            margin-right: 10px;
        }

        button {
            padding: 10px 20px;
            background-color: #2d89ef;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
        }

        button:hover {
            background-color: #1b6fdc;
        }
    </style>
</head>
<body>
    <header>
        <h1>Lex Chatbot Assistant</h1>
    </header>

    <div class="chat-container">
        <div id="chatBox"></div>
        <div class="input-area">
            <input type="text" id="userInput" placeholder="Type your message...">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script>
        // Initialize AWS and Lex
        AWS.config.update({
            region: 'us-east-1',
            credentials: new AWS.CognitoIdentityCredentials({
                IdentityPoolId: 'us-east-1:24d02c56-a2b8-41d7-8565-6041a8440317'
            })
        });

        const lexRuntime = new AWS.LexRuntimeV2();
        let sessionId = 'session-' + Math.random().toString(36).substring(2, 15);

        function sendMessage() {
            const userInputField = document.getElementById('userInput');
            const userInput = userInputField.value.trim();
            const chatBox = document.getElementById('chatBox');

            if (!userInput) return;

            chatBox.innerHTML += `<p><strong>You:</strong> ${userInput}</p>`;
            userInputField.value = '';
            chatBox.scrollTop = chatBox.scrollHeight;

            const params = {
                botId: 'RTPCABENVF',
                botAliasId: 'B8EVCUUYIB',
                localeId: 'en_US',
                sessionId: sessionId,
                text: userInput
            };

            lexRuntime.recognizeText(params, (err, data) => {
                if (err) {
                    console.error("Lex error:", err);
                    chatBox.innerHTML += `<p><strong>Error:</strong> ${err.message}</p>`;
                } else if (data.messages && data.messages.length > 0) {
                    data.messages.forEach(msg => {
                        chatBox.innerHTML += `<p><strong>Bot:</strong> ${msg.content}</p>`;
                    });
                }
                chatBox.scrollTop = chatBox.scrollHeight;
            });
        }

        // Send message on Enter key
        document.getElementById('userInput').addEventListener('keypress', function (event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                sendMessage();
            }
        });
    </script>
</body>
</html>
